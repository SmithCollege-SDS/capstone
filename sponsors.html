<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Smith College Data Science Clinic - Info for Sponsors</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="include/smith.css">
<meta property="og:title" content="Smith College Data Science Clinic - Info for Sponsors">
<meta property="og:description" content="">
<meta property="og:site_name" content="Smith College Data Science Clinic">
<meta name="twitter:title" content="Smith College Data Science Clinic - Info for Sponsors">
<meta name="twitter:description" content="">
<meta name="twitter:site" content="@SmithCollegeSDS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Smith College Data Science Clinic</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> <i class="bi bi-fa-home" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./sponsors.html" aria-current="page"> <i class="bi bi-fa-hands-helping" role="img">
</i> 
<span class="menu-text">Sponsors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./projects.html"> <i class="bi bi-fa-project-diagram" role="img">
</i> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./media.html"> <i class="bi bi-fa-share-alt" role="img">
</i> 
<span class="menu-text">Media</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contact.html"> <i class="bi bi-fa-info" role="img">
</i> 
<span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.twitter.com/SmithCollegeSDS"> <i class="bi bi-fab fa-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="http://www.smith.edu/sds"> <i class="bi bi-fa-university" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Info for Sponsors</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="about-the-course" class="level2">
<h2 class="anchored" data-anchor-id="about-the-course">About the course</h2>
<p>SDS 410: (Capstone in Statistical &amp; Data Sciences) is modeled as a data science consulting firm, wherein the instructor is the managing partner and the students are the junior partners. Students work <strong>collaboratively</strong> in teams of 3–5 on a project sponsored by a private company, research lab, or non-profit organization. All projects are centered around using data to solve <strong>real-world</strong> problems.</p>
<p>The ideal project:</p>
<ul>
<li>is challenging but not impossible</li>
<li>would take a small team of students several months – not several weeks or years</li>
<li>has some public/open-source exposure (for their portfolio)</li>
<li>makes the world a better place</li>
</ul>
<p>Each section consists of 25–30 students — all of whom are senior majors in <a href="http://www.smith.edu/sds">statistical &amp; data sciences</a>. They have foundational training in statistics, computer programming, data visualization, data wrangling, communication, and ethics, as outlined in our <a href="https://www.smith.edu/academics/statistics">curriculum</a>, and in pursuit of our <a href="https://www.smith.edu/about-smith/institutional-research/learning-goals#offices-institutional-research-statistical-data-sciences">learning goals</a>. They are ready to tackle projects involving statistical modeling, data visualization, web scraping, web or mobile app development, database development, etc. The end result might be a web API, a statistical model, a publishable research paper, an internal white paper, a web application, or whatever else seems appropriate.</p>
<p>You can learn more about the course through the slides for this talk:</p>
<ul>
<li>Data Science Clinic: A capstone experience for Smithies in SDS<br>
Benjamin S. Baumer, Smith College<br>
Statistics and Data Science Symposium<br>
June 3rd, 2020<br>
https://beanumber.github.io/talks/sdss2020/capstone.html</li>
</ul>
</section>
<section id="whats-in-it-for-you" class="level2">
<h2 class="anchored" data-anchor-id="whats-in-it-for-you">What’s in it for you?</h2>
<p>These students are highly-motivated and capable. They will go on to top graduate schools and companies. Students from previous classes are working full-time at Google, MasterCard, CitiGroup, and MassMutual. Others are attending doctoral and master’s programs in statistics, computer science, and data science at Harvard University, Columbia University, the University of Michigan, the University of North Carolina, the University of Pittsburgh, and the University of California-Riverside. A sponsored project will provide you with:</p>
<ul>
<li>dedicated attention to your project</li>
<li>recruiting (of underrepresented genders – all applicants to Smith College must <a href="https://www.smith.edu/about-smith/equity-inclusion/gender-identity-expression">identify as a woman</a>)</li>
<li>goodwill and PR</li>
<li>a substantive attempt to solve your data problem! Of course we can’t promise a solution, but we will make a worthy attempt.</li>
</ul>
</section>
<section id="what-well-need-from-you-and-when" class="level2">
<h2 class="anchored" data-anchor-id="what-well-need-from-you-and-when">What we’ll need from you (and when)</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The next iteration of the course starts <strong>Thursday, Sep.&nbsp;3, 2024</strong> and ends Thursday, Dec 10, 2024. If you are interested in sponsoring a project, we’ll need:</p>
</div>
</div>
<p>By August 1st: Contact Ben Baumer <a href="mailto:bbaumer@smith.edu" class="uri">mailto:bbaumer@smith.edu</a> with</p>
<ul>
<li>an idea for a project that involves some non-trivial data (that you have or know how to get)</li>
<li>a general description of your data (what format, roughly how many rows and columns, etc.)</li>
<li>a commitment from someone in your organization to serve as a contact person to interact with our students. This commitment might be on the order of one hour per week for 13 weeks, but could be more or less depending on your needs and availability. Contact could come via email, Slack, Zoom, etc.</li>
</ul>
<p>By August 15th:</p>
<ul>
<li>a one paragraph description of your problem</li>
<li>a more specific description of your data</li>
<li>a three-minute video in which you introduce yourself, your organization, and describe your project to the students</li>
<li>a <a href="https://docs.google.com/forms/d/e/1FAIpQLSe7PMWljdO3P5V9YDQTXHHMIcD7RHPjqGZyzx5dX3C3wNEV8Q/viewform">completed intake form</a></li>
</ul>
</section>
<section id="whos-done-this-before" class="level2">
<h2 class="anchored" data-anchor-id="whos-done-this-before">Who’s done this before?</h2>
<p>Please see our <a href="projects.html#project_archive">project archive</a> for a comprehensive list of previous projects</p>
<div class="grid">
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://static.www.nfl.com/image/private/t_editorial_landscape_12_desktop/league/bkhufsolhou43uouttw8.png" class="img-fluid figure-img"></p>
<figcaption>NFL logo</figcaption>
</figure>
</div>
</div>
<section id="michael-lopez" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="michael-lopez">Michael Lopez</h4>
<p>“The Smith SDS students consistently demonstrated passion, intellect, and creativity that led us to think of enhanced and data-drive ways of improving our product. In particular, the students possessed outstanding data visualization skills, an appropriate understanding of uncertainty, and a willingness to work independently that consistently left us impressed.”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/en/d/dd/Metro_Council_logo.png" class="img-fluid figure-img"></p>
<figcaption>Met Council logo</figcaption>
</figure>
</div>
</div>
<section id="mauricio-león" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="mauricio-león">Mauricio León</h4>
<p>“I have to say that this group has done an outstanding work that surpassed my expectations. They were able to work around the difficulties of not having all the resources they had at the beginning due to the pandemic. They found creative solutions to problems involving datasets that we too large to handle in a conventional way, and worked with tools that are familiar to our team at the Met Council. The team maintained a positive attitude during the development of the work, asked reasonable questions, and tried to clarify the tasks along the way. As a result, they produced something that is of significant value for the development of our greenhouse gas mitigation research at the Metropolitan Council.”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.cccu.org/wp-content/uploads/2019/01/EBSCO-logo-1493.jpg" class="img-fluid figure-img"></p>
<figcaption>EBSCO logo</figcaption>
</figure>
</div>
</div>
<section id="kayleigh-hinckley" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="kayleigh-hinckley">Kayleigh Hinckley</h4>
<p>“The students from SDS 410 were great to work with. They were able to quickly understand the large, complex problem we presented, researched and assessed multiple avenues for solving it, wrangled data from several sources, and ultimately produced an algorithm with results that are meaningful and actionable. The work from these students was the foundation our business needed to propel forward in a competitive industry. We look forward to working with Smith students again!”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pbs.twimg.com/profile_images/3218754403/bf95558332069c89539236ff830ad712.jpeg" class="img-fluid figure-img"></p>
<figcaption>OpenElections logo</figcaption>
</figure>
</div>
</div>
<section id="derek-willis" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="derek-willis">Derek Willis</h4>
<p>“The Smith College students dove right into a complicated and messy set of tasks. They asked good questions and weren’t shy about making suggestions that improved the outcome. We were looking for a way to turn what was a repetitive manual task into one that could be at least partially automated, and they succeeded at producing code that trades data entry and other time-consuming methods for a better, faster approach. Finally, they were professional in their communication and maintained a positive attitude throughout the project.”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pbs.twimg.com/profile_images/378800000117007819/bbabb9c3afb8c40c9c2acfe99aa05595.jpeg" class="img-fluid figure-img"></p>
<figcaption>NBA logo</figcaption>
</figure>
</div>
</div>
<section id="nba-team-analyst" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="nba-team-analyst">NBA team analyst</h4>
<p>“It was a pleasure to collaborate with the SDS 410 students. We were impressed by the students’ technical capabilities and their ability to work independently. Their work was both well documented and clearly presented and overall we were very happy with the results they achieved.”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pbs.twimg.com/profile_images/877538565382696960/3fi9Ub-Y_400x400.jpg" class="img-fluid figure-img"></p>
<figcaption>Wisconsin Project logo</figcaption>
</figure>
</div>
</div>
<section id="meghan-crimmins" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="meghan-crimmins">Meghan Crimmins</h4>
<p>“The Smith College students we worked with were professional, timely, and were able to explain complex ideas in digestible ways. They communicated well throughout the project and were committed to finding a solution to our data problem. Their use of natural language processing to extract and structure previously unstructured data has helped inform our research on proliferation networks, and the macro-level visualizations they delivered have given us new ways to present our research to potential clients and the public. We look forward to working with Smith SDS students again in the future!”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://idlc.com/mbr/images/public/ZWv8SqZMeQXHbn1mT2JV8z.JPG" class="img-fluid figure-img"></p>
<figcaption>Praava Health logo</figcaption>
</figure>
</div>
</div>
<section id="sabrina-imam" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="sabrina-imam">Sabrina Imam</h4>
<p>“Their work has helped us figure out the entity definitions of a large portion of the database. We found the students to be very enthusiastic, smart, and professional in their approach. They were very quick to understand our database, and were always on time for our weekly calls despite the 10-hour time difference. We especially appreciate the students’ creative thinking and their use of some new and innovative tools to create a column-to-column connectivity diagram and a network graph that was outside the project scope.”</p>
</section>
<div class="g-col-4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://assets.propublica.org/2017-pp-open-graph-1200x630.jpg" class="img-fluid figure-img"></p>
<figcaption>ProPublica logo</figcaption>
</figure>
</div>
</div>
<section id="ryann-grochowski-jones" class="level4 g-col-8">
<h4 class="anchored" data-anchor-id="ryann-grochowski-jones">Ryann Grochowski Jones</h4>
<p>“The SDS 410 students were communicative and professional. They worked independently but weren’t afraid to ask questions if something was unclear. I’m eager to work with Smith students again in future semesters.”</p>
</section>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/SmithCollege-SDS\.github\.io\/capstone\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>